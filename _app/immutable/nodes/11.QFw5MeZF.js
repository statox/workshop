import{s as ee,f as _,g as k,h as E,d as g,j as b,i as P,r as W,I as ie,a as C,N as M,c as A,H as u,T as ce,l as I,m as L,G as V,w as R,n as ae,A as he}from"../chunks/scheduler.gPpAMAn9.js";import{S as te,i as ne,b as F,d as J,m as Q,a as X,t as Y,e as Z}from"../chunks/index.53-awX_m.js";import{P as de}from"../chunks/P5.ioCCBmF5.js";import{e as oe}from"../chunks/each.bzmX_KK2.js";import{T as ue}from"../chunks/TapTempo.Oc7is1s8.js";function me(o){let t,l,h;return l=new de({props:{sketch:o[0]}}),{c(){t=_("div"),F(l.$$.fragment),this.h()},l(a){t=k(a,"DIV",{id:!0,class:!0});var r=E(t);J(l.$$.fragment,r),r.forEach(g),this.h()},h(){b(t,"id","canvas-container"),b(t,"class","d-flex justify-content-center")},m(a,r){P(a,t,r),Q(l,t,null),h=!0},p:W,i(a){h||(X(l.$$.fragment,a),h=!0)},o(a){Y(l.$$.fragment,a),h=!1},d(a){a&&g(t),Z(l)}}}function pe(o,t,l){let h,{keptDuration:a}=t,{taps:r}=t,{pause:v}=t;const c=n=>{n.setup=()=>{l(4,h=n),n.createCanvas(600,100)},n.draw=()=>{const p=document.getElementById("canvas-container");if(p){const e=p?.clientWidth||600;n.width!==e&&n.resizeCanvas(e,100);const s=getComputedStyle(document.body),d=s.getPropertyValue("--nc-bg-2")||"white",i=s.getPropertyValue("--nc-tx-1")||"black";n.background(d),n.stroke(i)}const y=Date.now(),w=y-a;for(const e of r){const s=n.map(e,y,w,n.width,0);n.line(s,0,s,n.height)}}};return ie(()=>{h?.remove()}),o.$$set=n=>{"keptDuration"in n&&l(1,a=n.keptDuration),"taps"in n&&l(2,r=n.taps),"pause"in n&&l(3,v=n.pause)},o.$$.update=()=>{o.$$.dirty&24&&(v?h?.noLoop():h?.loop())},[c,a,r,v,h]}class fe extends te{constructor(t){super(),ne(this,t,pe,me,ee,{keptDuration:1,taps:2,pause:3})}}function le(o,t,l){const h=o.slice();return h[4]=t[l],h}function re(o){let t,l=o[3](o[4])+"",h,a,r,v=o[4].name+"",c,n,p,y=o[4].description+"",w;return{c(){t=_("span"),h=I(l),a=C(),r=_("span"),c=I(v),n=C(),p=_("span"),w=I(y),this.h()},l(e){t=k(e,"SPAN",{class:!0});var s=E(t);h=L(s,l),s.forEach(g),a=A(e),r=k(e,"SPAN",{class:!0});var d=E(r);c=L(d,v),d.forEach(g),n=A(e),p=k(e,"SPAN",{class:!0});var i=E(p);w=L(i,y),i.forEach(g),this.h()},h(){b(t,"class","col svelte-1kxd0qm"),V(t,"selected",o[2](o[0],o[4])),b(r,"class","col svelte-1kxd0qm"),V(r,"selected",o[2](o[0],o[4])),b(p,"class","col svelte-1kxd0qm"),V(p,"selected",o[2](o[0],o[4]))},m(e,s){P(e,t,s),u(t,h),P(e,a,s),P(e,r,s),u(r,c),P(e,n,s),P(e,p,s),u(p,w)},p(e,s){s&7&&V(t,"selected",e[2](e[0],e[4])),s&7&&V(r,"selected",e[2](e[0],e[4])),s&7&&V(p,"selected",e[2](e[0],e[4]))},d(e){e&&(g(t),g(a),g(r),g(n),g(p))}}}function ge(o){let t,l,h="BPM",a,r,v="Tempo",c,n,p="Description",y,w=oe(o[1]),e=[];for(let s=0;s<w.length;s+=1)e[s]=re(le(o,w,s));return{c(){t=_("div"),l=_("span"),l.textContent=h,a=C(),r=_("span"),r.textContent=v,c=C(),n=_("span"),n.textContent=p,y=C();for(let s=0;s<e.length;s+=1)e[s].c();this.h()},l(s){t=k(s,"DIV",{class:!0});var d=E(t);l=k(d,"SPAN",{class:!0,"data-svelte-h":!0}),M(l)!=="svelte-cdp0q5"&&(l.textContent=h),a=A(d),r=k(d,"SPAN",{class:!0,"data-svelte-h":!0}),M(r)!=="svelte-1lklpwv"&&(r.textContent=v),c=A(d),n=k(d,"SPAN",{class:!0,"data-svelte-h":!0}),M(n)!=="svelte-df2g4a"&&(n.textContent=p),y=A(d);for(let i=0;i<e.length;i+=1)e[i].l(d);d.forEach(g),this.h()},h(){b(l,"class","col table-head svelte-1kxd0qm"),b(r,"class","col table-head svelte-1kxd0qm"),b(n,"class","col table-head svelte-1kxd0qm"),b(t,"class","container svelte-1kxd0qm")},m(s,d){P(s,t,d),u(t,l),u(t,a),u(t,r),u(t,c),u(t,n),u(t,y);for(let i=0;i<e.length;i+=1)e[i]&&e[i].m(t,null)},p(s,[d]){if(d&15){w=oe(s[1]);let i;for(i=0;i<w.length;i+=1){const K=le(s,w,i);e[i]?e[i].p(K,d):(e[i]=re(K),e[i].c(),e[i].m(t,null))}for(;i<e.length;i+=1)e[i].d(1);e.length=w.length}},i:W,o:W,d(s){s&&g(t),ce(e,s)}}}function ve(o,t,l){let{currentBpm:h}=t;const a=[{name:"Larghissimo",description:"Extremely slow, slowest type of tempo",high:24},{name:"Adagissimo and Grave",description:"Very slow, very slow and solemn",low:24,high:40},{name:"Largo",description:"Slow and broad",low:40,high:66},{name:"Larghetto",description:"Rather slow and broad",low:44,high:66},{name:"Adagio",description:"Slow with great expression",low:44,high:68},{name:"Adagietto",description:"Slower than andante or slightly faster than adagio",low:46,high:80},{name:"Lento",description:"Slow",low:52,high:108},{name:"Andante",description:"At a walking pace, moderately slow",low:56,high:108},{name:"Andantino",description:"Slightly faster than andante, but slower than moderato (although, in some cases, it can be taken to mean slightly slower than andante)",low:80,high:108},{name:"Andante moderato",description:"Between andante and moderato (at a moderate walking speed)",low:80,high:108},{name:"Moderato",description:"At a moderate speed",low:108,high:120},{name:"Allegretto",description:"By the mid-19th century, moderately fast",low:112,high:120},{name:"Allegro moderato",description:"Close to, but not quite allegro",low:116,high:120},{name:"Allegro",description:"Fast and bright",low:120,high:156},{name:"Molto Allegro or Allegro vivace",description:"At least slightly faster and livelier than allegro, but always at its range (and no faster than vivace)",low:124,high:156},{name:"Vivace",description:"Lively and fast",low:156,high:176},{name:"Vivacissimo and Allegrissimo",description:"Very fast, lively and bright",low:172,high:176},{name:"Presto",description:"Very fast",low:168,high:200},{name:"Prestissimo",description:"Extremely fast (At this tempo, cut common time is often used)",low:200}],r=(c,n)=>c>(n.low??0)&&c<=(n.high??9999),v=c=>{if(c.high&&c.low)return`${c.low} - ${c.high}`;if(c.low)return`>${c.low}`;if(c.high)return`<${c.high}`};return o.$$set=c=>{"currentBpm"in c&&l(0,h=c.currentBpm)},[h,a,r,v]}class we extends te{constructor(t){super(),ne(this,t,ve,ge,ee,{currentBpm:0})}}function _e(o){let t,l="Tap Tempo",h,a,r,v="Press the space bar or click/tap anywhere on the page to get a bpm.",c,n,p=o[0].bpm+"",y,w,e,s,d,i,K="Reset (c)",j,B,$=o[2]?"Play":"Pause",U,x,z,S,G,T,q,H,se;return S=new fe({props:{taps:o[0].taps,keptDuration:o[0].keptDuration,pause:o[2]}}),T=new we({props:{currentBpm:o[0].bpm}}),{c(){t=_("h3"),t.textContent=l,h=C(),a=_("div"),r=_("div"),r.textContent=v,c=C(),n=_("div"),y=I(p),w=_("br"),e=I("BPM"),s=C(),d=_("div"),i=_("button"),i.textContent=K,j=C(),B=_("button"),U=I($),x=I(" (Enter)"),z=C(),F(S.$$.fragment),G=C(),F(T.$$.fragment),this.h()},l(m){t=k(m,"H3",{"data-svelte-h":!0}),M(t)!=="svelte-zwchjg"&&(t.textContent=l),h=A(m),a=k(m,"DIV",{class:!0});var f=E(a);r=k(f,"DIV",{"data-svelte-h":!0}),M(r)!=="svelte-11wi1xz"&&(r.textContent=v),c=A(f),n=k(f,"DIV",{class:!0});var D=E(n);y=L(D,p),w=k(D,"BR",{}),e=L(D,"BPM"),D.forEach(g),s=A(f),d=k(f,"DIV",{class:!0});var N=E(d);i=k(N,"BUTTON",{class:!0,"data-svelte-h":!0}),M(i)!=="svelte-5hccmf"&&(i.textContent=K),j=A(N),B=k(N,"BUTTON",{class:!0});var O=E(B);U=L(O,$),x=L(O," (Enter)"),O.forEach(g),N.forEach(g),z=A(f),J(S.$$.fragment,f),G=A(f),J(T.$$.fragment,f),f.forEach(g),this.h()},h(){b(n,"class","bpm svelte-1t43gmp"),V(n,"tapped",o[1]),b(i,"class","control-button svelte-1t43gmp"),b(B,"class","control-button svelte-1t43gmp"),b(d,"class","controls svelte-1t43gmp"),b(a,"class","container svelte-1t43gmp")},m(m,f){P(m,t,f),P(m,h,f),P(m,a,f),u(a,r),u(a,c),u(a,n),u(n,y),u(n,w),u(n,e),u(a,s),u(a,d),u(d,i),u(d,j),u(d,B),u(B,U),u(B,x),u(a,z),Q(S,a,null),u(a,G),Q(T,a,null),q=!0,H||(se=[R(window,"keydown",o[5]),R(window,"keyup",o[6]),R(window,"pointerdown",o[3]),R(i,"click",o[4]),R(B,"click",o[7])],H=!0)},p(m,[f]){(!q||f&1)&&p!==(p=m[0].bpm+"")&&ae(y,p),(!q||f&2)&&V(n,"tapped",m[1]),(!q||f&4)&&$!==($=m[2]?"Play":"Pause")&&ae(U,$);const D={};f&1&&(D.taps=m[0].taps),f&1&&(D.keptDuration=m[0].keptDuration),f&4&&(D.pause=m[2]),S.$set(D);const N={};f&1&&(N.currentBpm=m[0].bpm),T.$set(N)},i(m){q||(X(S.$$.fragment,m),X(T.$$.fragment,m),q=!0)},o(m){Y(S.$$.fragment,m),Y(T.$$.fragment,m),q=!1},d(m){m&&(g(t),g(h),g(a)),Z(S),Z(T),H=!1,he(se)}}}function ke(o,t,l){let h=new ue,a=!1;const r=()=>{c||(h.addBeat(),l(0,h),l(1,a=!0),setTimeout(()=>l(1,a=!1),100))},v=()=>{h.reset(),l(0,h)};let c=!1,n=!0;return[h,a,c,r,v,e=>{const s=" ",d="Enter",i="c";if([s,d,i].includes(e.key)&&(e.preventDefault(),!!n)){if(n=!1,e.key===s){l(2,c=!1),r();return}if(e.key===d){l(2,c=!c);return}e.key===i&&(v(),l(0,h))}},e=>{const s=" ";!n&&e.key===s&&(n=!0,e.preventDefault())},()=>l(2,c=!c)]}class De extends te{constructor(t){super(),ne(this,t,ke,_e,ee,{})}}export{De as component};
